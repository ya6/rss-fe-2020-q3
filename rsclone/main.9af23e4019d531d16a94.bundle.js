(()=>{"use strict";const t=document.createElement("canvas");t.className="canvas_back";const e=t.getContext("2d"),r=document.createElement("canvas");r.className="canvas_game";const s=r.getContext("2d"),i=window.innerWidth,n=window.innerHeight,a=i>=1e3?1e3:10*Math.round(.8*i/10),o=10*Math.round(.85*n/10),l=60,d=a>800?80:10*Math.round(a/100),b=o>700?40:10*Math.round(o/300),h=80,c={current_round:0,MAX_ROUND:2,bricks:[],stop_game:!1,FONT_SIZE:30,round_score:0,game_score:0,element_round_score:null,element_score_score:null,passed_rounds:[!1,!1,!1],test_mode:!1,life:3},_={_2_seconds:!0,set_2_seconds(){_._2_seconds=!0,setTimeout((()=>{_._2_seconds=!1}),2e3)}},m={x:0,y:0,updating:!1,x_start:0,y_start:0,dx:0,dy:0,left_left_correction:0,right_correction:0},g={intro:{obj_audio:new Audio,src:"./assets/music/Matt Gray - Arkanoid Title Theme.mp3"},round_start:{obj_audio:new Audio,src:"./assets/music/Round Start.mp3"},sfx4:{obj_audio:new Audio,src:"./assets/music/Arkanoid SFX (4).mp3"},sfx6:{obj_audio:new Audio,src:"./assets/music/Arkanoid SFX (6).mp3"},sfx7:{obj_audio:new Audio,src:"./assets/music/Arkanoid SFX (7).mp3"},sfx11:{obj_audio:new Audio,src:"./assets/music/Arkanoid SFX (11).mp3"},win:{obj_audio:new Audio,src:"./assets/music/Ending.mp3"},game_over:{obj_audio:new Audio,src:"./assets/music/Game Over.mp3"}},u=1.5,y=["bonus_s","bonus_c","bonus_d","bonus_e"],p={bonus_frame:0,setBonusRotation(){setInterval((()=>{p.bonus_frame+=1,p.bonus_frame>7&&(p.bonus_frame=0)}),150)}};function f(t,e){t.insertAdjacentHTML("afterbegin",e)}t.width=a,t.height=l+o,r.width=a,r.height=o;function x(t){const e=t.play();void 0!==e&&e.then((e=>{t.pause(),t.currentTime=0,t.play()})).catch((t=>{}))}function v(){document.body.innerHTML="",f(document.body,'\n<div class="container start-template">\n    <div class="d-flex flex-column mt-5 justify-content-center" >\n\n        <div class="d-flex mt-5 justify-content-center" >\n            <img  class = "w-75" class="brd" src="./assets/img/rsclone.svg" alt="rsclone">\n        </div>\n        <div class="d-flex mt-5 justify-content-center" >\n            <img  class = "w-50" class="brd" src="./assets/img/arkanoid.svg" alt="arkanoid">\n        </div>\n\n        <div class="d-flex mt-4 justify-content-center" >\n            <button class="help text-white bg-black arcade-font h5 border-0" type="button">push<br>h button for help</button> \n        </div>\n\n        <div class="d-flex mt-4 justify-content-center" >\n            <button class="space text-white bg-black arcade-font h5 border-0" type="button">push<br>space to play</button> \n        </div>\n        <div class="d-flex mt-5 justify-content-center" >\n        <button class="music text-white bg-black arcade-font h5 border-0" type="button">play music</button> \n    </div>\n\n        <div class="d-flex mt-5 justify-content-center" >\n        <h2 class="text-center text-warning">typescript project</h2>\n        </div>\n\n        <div class="d-flex  mt-2  justify-content-center" >\n        <a href="https://github.com/ya6" class="text-dark d-flex align-items-center">\n        <div class="github m-1"></div>\n        <h2 class="text-danger">ya6</h2>\n    </a>\n        </div>\n       \n    </div>\n\n    <div class="d-flex justify-content-center flex-wrap mt-2"  >\n              \n                <div class="mx-2">\n                    <a href="https://rs.school/js/" class="text-dark d-flex align-items-center">\n                        <div class="rsschool m-1"></div>\n                        <div  class="text-white"> "JavaScript/Front-end"</div>\n                    </a>\n                </div>\n               \n            <div class="mx-2 d-flex align-items-center"> <div><strong>2021</strong> </div></div>\n\n</div>\n'),function(t){var e,r,s,i;e=this,r=void 0,i=function*(){for(const e in t)t[e].obj_audio.src=t[e].src,yield t[e].obj_audio.readyState,HTMLMediaElement.HAVE_ENOUGH_DATA;return"sounds load!"},new((s=void 0)||(s=Promise))((function(t,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function o(t){try{l(i.throw(t))}catch(t){n(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(a,o)}l((i=i.apply(e,r||[])).next())}))}(g),x(g.intro.obj_audio),document.querySelector(".music").addEventListener("click",(()=>{x(g.intro.obj_audio)}))}function w(t){null!==t&&null!==t.parentNode&&t.parentNode.removeChild(t)}function k(t,e){return Math.floor(Math.random()*(e-t+1)+t)}const E={background:{img:new Image,url:"./assets/img/back_5.png"},border_pipe_horizontal:{img:new Image,url:"./assets/img/border_pipe_horizontal.png"},border_pipe_vert:{img:new Image,url:"./assets/img/border_pipe_vert.png"},border_block_horizontal:{img:new Image,url:"./assets/img/border_block_horizontal.png"},border_block_vert:{img:new Image,url:"./assets/img/border_block_vert.png"},border_cornerTL:{img:new Image,url:"./assets/img/border_cornerTL.png"},border_cornerTR:{img:new Image,url:"./assets/img/border_cornerTR.png"},border_cornerBL:{img:new Image,url:"./assets/img/border_cornerBL.png"},border_cornerBR:{img:new Image,url:"./assets/img/border_cornerBR.png"},ball:{name:"ball",is_active:!0,img:new Image,url:"./assets/img/ball_2.png",x:(a-15)/2,y:o-h-15,width:15,height:15,speed:7,dx:0,dy:0,acceleration:0,stick:!1,l:{x:0,y:0},r:{x:0,y:0},t:{x:0,y:0},b:{x:0,y:0},start(){this.dy=-this.speed,this.stick||(this.dx=k(-this.speed,this.speed))},move(){this.dy&&(this.y+=this.dy,this.x+=this.dx),0===this.dy&&(this.x=E.platform.x+E.platform.width/2-this.width/2),this.dimensionUpdate()},dimensionUpdate(){this.l.x=this.x,this.l.y=this.y+7,this.r.x=this.x+15,this.r.y=this.y+7,this.t.x=this.x+7,this.t.y=this.y,this.b.x=this.x+7,this.b.y=this.y+15},reset(){this.x=(a-15)/2,this.y=o-h-15,this.dy=0,this.dx=0,this.acceleration=0}},ball2:{name:"ball2",is_active:!1,img:new Image,url:"./assets/img/ball_2.png",x:(a-15)/2-16,y:o-h-15,width:15,height:15,speed:7,dx:0,dy:0,acceleration:0,stick:!1,l:{x:0,y:0},r:{x:0,y:0},t:{x:0,y:0},b:{x:0,y:0},start(){this.is_active&&(this.x=E.platform.x+E.platform.width/2-16,this.dy=-this.speed,this.stick||(this.dx=k(-this.speed,this.speed)))},move(){this.is_active&&(this.dy&&(this.y+=this.dy,this.x+=this.dx),0===this.dy&&(this.x=E.platform.x+E.platform.width/2-this.width/2-16),this.dimensionUpdate())},dimensionUpdate(){this.l.x=this.x,this.l.y=this.y+7,this.r.x=this.x+15,this.r.y=this.y+7,this.t.x=this.x+7,this.t.y=this.y,this.b.x=this.x+7,this.b.y=this.y+15},reset(){this.is_active=!1,this.x=(a-15)/2-16,this.y=o-h-15,this.dy=0,this.dx=0,this.acceleration=0}},ball3:{name:"ball3",is_active:!1,img:new Image,url:"./assets/img/ball_2.png",x:(a-15)/2+16,y:o-h-15,width:15,height:15,speed:7,dx:0,dy:0,acceleration:0,stick:!1,l:{x:0,y:0},r:{x:0,y:0},t:{x:0,y:0},b:{x:0,y:0},start(){this.is_active&&(this.x=E.platform.x+E.platform.width/2+16,this.dy=-this.speed,this.stick||(this.dx=k(-this.speed,this.speed)))},move(){this.is_active&&(this.dy&&(this.y+=this.dy,this.x+=this.dx),0===this.dy&&(this.x=E.platform.x+E.platform.width/2-this.width/2+16),this.dimensionUpdate())},dimensionUpdate(){this.l.x=this.x,this.l.y=this.y+7,this.r.x=this.x+15,this.r.y=this.y+7,this.t.x=this.x+7,this.t.y=this.y,this.b.x=this.x+7,this.b.y=this.y+15},reset(){this.is_active=!1,this.x=(a-15)/2+16,this.y=o-h-15,this.dy=0,this.dx=0,this.acceleration=0}},platform:{img:new Image,url:"./assets/img/platform_+.png",x:(a-100)/2,y:o-h,frame_position:0,width:100,height:30,speed:10,dx:0,dy:0,acceleration:0,l:0,r:0,t:0,b:0,start(t){37===t&&(this.dx=-this.speed),39===t&&(this.dx=this.speed)},move(){(this.x>=40&&this.x<=a-(40+this.width)||this.x<=40&&this.dx>0||this.x>=a-(40+this.width)&&this.dx<0)&&(this.dx&&(this.x+=this.dx),this.dimensionUpdate())},stop(){this.dx=0,this.acceleration=0},dimensionUpdate(){this.l=this.x,this.r=this.x+this.width,this.t=this.y,this.b=this.y+this.height},reset(){this.x=(a-100)/2,this.y=o-h,this.frame_position=0,this.width=100}},bonus_s:{img:new Image,url:"./assets/img/bonus_s.png",x:0,y:0,l:0,r:0,t:0,b:0,width:d,height:b,frame:0,bonus_start:!1,bonus_activate:!1,move(){this.bonus_start&&(this.y+=u,this.y>o&&(this.bonus_start=!1),this.dimensionUpdate())},dimensionUpdate(){this.l=this.x,this.r=this.x+this.width,this.t=this.y,this.b=this.y+this.height},activate(){this.bonus_start=!1,this.y=0,this.b=0,E.ball.dy/=2,E.ball.dx/=1.5,setTimeout((()=>{E.ball.dy=E.ball.dy>0?7:-7,E.ball.dx*=1.5}),2e4)}},bonus_c:{img:new Image,url:"./assets/img/bonus_c.png",x:0,y:0,l:0,r:0,t:0,b:0,width:d,height:b,frame:0,bonus_start:!1,bonus_activate:!1,move(){this.bonus_start&&(this.y+=u,this.y>o&&(this.bonus_start=!1),this.dimensionUpdate())},dimensionUpdate(){this.l=this.x,this.r=this.x+this.width,this.t=this.y,this.b=this.y+this.height},activate(){this.bonus_start=!1,this.y=0,this.b=0,E.ball.stick=!0,E.ball2.stick=!0,E.ball3.stick=!0,setTimeout((()=>{E.ball.stick=!1,E.ball2.stick=!1,E.ball3.stick=!1}),2e4)}},bonus_d:{img:new Image,url:"./assets/img/bonus_d.png",x:0,y:0,l:0,r:0,t:0,b:0,width:d,height:b,frame:0,bonus_start:!1,bonus_activate:!1,move(){this.bonus_start&&(this.y+=u,this.y>o&&(this.bonus_start=!1),this.dimensionUpdate())},dimensionUpdate(){this.l=this.x,this.r=this.x+this.width,this.t=this.y,this.b=this.y+this.height},activate(){this.bonus_start=!1,this.y=0,this.b=0,E.ball2.is_active=!0,E.ball3.is_active=!0,E.ball2.start(),E.ball3.start()}},bonus_e:{img:new Image,url:"./assets/img/bonus_e.png",x:0,y:0,l:0,r:0,t:0,b:0,width:d,height:b,frame:0,bonus_start:!1,bonus_activate:!1,move(){this.bonus_start&&(this.y+=u,this.y>o&&(this.bonus_start=!1),this.dimensionUpdate())},dimensionUpdate(){this.l=this.x,this.r=this.x+this.width,this.t=this.y,this.b=this.y+this.height},activate(){this.bonus_start=!1,this.y=0,this.b=0,x(g.sfx4.obj_audio),E.platform.frame_position=100,E.platform.width=150,setTimeout((()=>{E.platform.frame_position=0,E.platform.width=100}),2e4)}},br_green:{img:new Image,url:"./assets/img/brick_green.png",width:d,height:b},br_magenta:{img:new Image,url:"./assets/img/brick_magenta.png",width:d,height:b},br_yellow:{img:new Image,url:"./assets/img/brick_yellow.png",width:d,height:b},br_grey:{img:new Image,url:"./assets/img/brick_grey.png",width:d,height:b},br_red:{img:new Image,url:"./assets/img/brick_red.png",width:d,height:b},br_blue:{img:new Image,url:"./assets/img/brick_blue.png",width:d,height:b},br_dark:{img:new Image,url:"./assets/img/brick_dark_grey.png",width:d,height:b}},I=[[["br_grey","br_grey","br_grey","br_grey","br_grey","br_grey","br_grey","br_grey","br_grey","br_grey","br_grey","br_grey","br_grey"],["br_red","br_red","br_red","br_red","br_red","br_red","br_red","br_red","br_red","br_red","br_red","br_red","br_red"],["br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow","br_yellow"],["br_blue","br_blue","br_blue","br_blue","br_blue","br_blue","br_blue","br_blue","br_blue","br_blue","br_blue","br_blue","br_blue"],["br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta","br_magenta"],["br_green","br_green","br_green","br_green","br_green","br_green","br_green","br_green","br_green","br_green","br_green","br_green","br_green"]],[["br_grey","","","","","","","","","",""],["br_grey","br_yellow"],["br_grey","br_yellow","br_blue"],["br_grey","br_yellow","br_blue","br_green"],["br_grey","br_yellow","br_blue","br_green","br_red"],["br_grey","br_yellow","br_blue","br_green","br_red","br_yellow"],["br_grey","br_yellow","br_blue","br_green","br_red","br_yellow","br_magenta"],["br_grey","br_yellow","br_blue","br_green","br_red","br_yellow","br_magenta","br_grey"],["br_grey","br_yellow","br_blue","br_green","br_red","br_yellow","br_magenta","br_grey","br_green"],["br_grey","br_yellow","br_blue","br_green","br_red","br_yellow","br_magenta","br_grey","br_green","br_blue"],["br_dark","br_dark","br_dark","br_dark","br_dark","br_dark","br_dark","br_dark","br_dark","br_dark","br_red"]],[["br_yellow","br_blue","br_green","br_dark","br_magenta","","br_grey","br_magenta","br_yellow","br_blue","br_green"],["br_blue","br_green","br_dark","br_magenta","br_grey","","br_magenta","br_yellow","br_blue","br_green","br_yellow"],["br_green","br_dark","br_magenta","br_grey","br_magenta","","br_yellow","br_blue","br_green","br_yellow","br_blue"],["br_dark","br_magenta","br_grey","br_magenta","br_yellow","","br_blue","br_green","br_yellow","br_blue","br_green"],["br_magenta","br_grey","br_magenta","br_yellow","br_blue","","br_green","br_yellow","br_blue","br_green","br_dark"],["br_grey","br_magenta","br_yellow","br_blue","br_green","","br_yellow","br_blue","br_green","br_dark","br_magenta"],["br_magenta","br_yellow","br_blue","br_green","br_yellow","","br_blue","br_green","br_dark","br_magenta","br_grey"],["br_yellow","br_blue","br_green","br_yellow","br_blue","","br_green","br_dark","br_magenta","br_grey","br_magenta"],["br_blue","br_green","br_yellow","br_blue","br_green","","br_dark","br_magenta","br_grey","br_magenta","br_yellow"]]];function j(t=0){const e=[];let r=Math.floor((a-d)/d);r=r%2==0?r-1:r,r=r>I[t][0].length?I[t][0].length:r;const s=(I[t][0].length-r)/2,i=s+r,n=(a-r*d)/2;for(let r=0;r<I[t].length;r++){let a=0;for(let o=s;o<i;o++)I[t][r][o]&&e.push({type:I[t][r][o],x:n+d*a,y:70+b*r,width:d,height:b,l:n+d*a,r:n+d*a+d,t:70+b*r,b:70+b*r+b}),a+=1}return y.forEach((t=>{let r=k(30,e.length-1);for(;!e[r];)r=k(30,e.length-1);e[r].bonus=E[t],E[t].x=e[r].x,E[t].y=e[r].y})),e}function L(){m.updating?r.style.cursor="ew-resize":r.style.cursor="default"}function T(t){t.preventDefault(),0===E.ball.dy&&E.ball.start(),m.x=E.platform.x+E.platform.width/2,m.y=E.platform.y+E.platform.height/2,m.x_start=m.x,m.y_start=m.y,m.left_correction=m.x_start-E.platform.l,m.right_correction=E.platform.r-m.x_start,m.updating=!0,L()}function R(t){m.x=t.pageX-r.getBoundingClientRect().left,m.y=t.pageY-r.getBoundingClientRect().top,m.x>=E.platform.x&&m.x<=E.platform.x+E.platform.width&&m.y>=E.platform.y&&m.y<=E.platform.y+E.platform.height&&(m.x_start=m.x,m.y_start=m.y,m.left_correction=m.x_start-E.platform.l,m.right_correction=E.platform.r-m.x_start,m.updating=!m.updating,L())}function B(t){m.x=t.pageX-r.getBoundingClientRect().left,m.y=t.pageY-r.getBoundingClientRect().top,m.updating&&(m.dx=m.x_start-m.x,m.x>30+m.left_correction&&m.x<a-(m.right_correction+30)&&(E.platform.x=m.x-m.left_correction))}function A(t){const e=t.keyCode;37!==e&&39!==e||E.platform.start(e),32===e&&[E.ball,E.ball2,E.ball3].forEach((t=>{0===t.dy&&t.start()}))}function C(){E.platform.stop()}let O;const U={x:0,y:0,x_start:0,y_start:0,dx:0,dy:0,x_direction:0};function S(){document.removeEventListener("keydown",A),document.removeEventListener("keyup",C),document.removeEventListener("keypress",H),r.removeEventListener("click",R),r.removeEventListener("mousemove",B),document.removeEventListener("contextmenu",T),r.removeEventListener("dblclick",T),r.removeEventListener("touchstart",N),r.removeEventListener("touchmove",X)}function M(t){var e;c.bricks[t].bonus&&(c.bricks[t].bonus.bonus_start=!0),c.bricks.splice(t,1),c.element_round_score&&(e=c.element_round_score,c.round_score+=10,e.textContent=String(c.round_score)),0===c.bricks.length&&z("next")}function X(t){U.x=t.changedTouches[0].pageX-r.getBoundingClientRect().left,E.platform.x>=40&&E.platform.x<=a-(40+E.platform.width)&&(E.platform.x=U.x+U.dx,E.platform.x<40&&(E.platform.x=40),E.platform.x>a-(40+E.platform.width)&&(E.platform.x=a-(40+E.platform.width))),U.x_direction=U.x_direction+t.changedTouches[0].pageX}function N(t){U.x_start=t.changedTouches[0].pageX-r.getBoundingClientRect().left,U.y_start=t.changedTouches[0].pageY-r.getBoundingClientRect().top,U.dx=E.platform.x-U.x_start}function z(t){let e;for(D(),"next"===t&&(c.passed_rounds[c.current_round]=!0,e=c.passed_rounds.indexOf(!1),-1===e&&(c.stop_game=!0,s.clearRect(0,0,a,o),c.stop_game=!0,S(),x(g.win.obj_audio),Y("YOU WIN!"),setTimeout((()=>{$(),K()}),6e3))),c.current_round+=1,c.current_round===c.MAX_ROUND+1&&(c.current_round=0);-1!==e&&c.passed_rounds[c.current_round];)c.current_round+=1,c.current_round===c.MAX_ROUND+1&&(c.current_round=0);-1!==e&&(c.bricks=j(c.current_round),x(g.round_start.obj_audio),_.set_2_seconds(),F(`ROUND ${c.current_round+1}`))}function D(){E.ball.reset(),E.ball2.reset(),E.ball3.reset(),E.platform.reset(),c.stop_game=!0,y.forEach((t=>{E[t].bonus_start=!1}))}function H(t){"KeyC"===t.code&&z("skip"),"KeyT"===t.code&&(c.test_mode=!c.test_mode)}function Y(t){s.font=c.FONT_SIZE+"px ArcadeNormal",s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff5f5",s.shadowBlur=10,s.shadowColor="black",s.fillText(`${t}`,a/2,o-o/3)}function F(t){O===E.platform.x?E.platform.acceleration=0:O>E.platform.x?E.platform.acceleration=-1:E.platform.acceleration=1,window.requestAnimationFrame((()=>{E.platform.move(),[E.ball,E.ball2,E.ball3].forEach((t=>{t.move()})),y.forEach((t=>{E[t].move()})),function(t){s.clearRect(0,0,a,o),c.test_mode&&(s.drawImage(E.border_pipe_horizontal.img,4,o-22,a-8,18),s.drawImage(E.border_cornerBL.img,4,o-40),s.drawImage(E.border_cornerBR.img,a-40,o-40)),s.shadowColor="#000a1e",s.shadowBlur=5,s.shadowOffsetX=5,s.shadowOffsetY=5,[E.ball,E.ball2,E.ball3].forEach((t=>{t.is_active&&s.drawImage(t.img,0,0,t.width,t.height,t.x,t.y,t.width,t.height)})),s.drawImage(E.platform.img,E.platform.frame_position,0,E.platform.width,E.platform.height,E.platform.x,E.platform.y,E.platform.width,E.platform.height),s.shadowColor="",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0,t.forEach((function(t){s.drawImage(E[t.type].img,t.x,t.y,t.width,t.height)}));for(let t=1;t<c.life;t++)s.drawImage(E.platform.img,0,0,100,E.platform.height,60*t,o-40,50,15)}(c.bricks),_._2_seconds&&Y(t),function(){const t=a-25,e=o-25;!c.test_mode&&E.ball.t.y>=o&&(x(g.sfx11.obj_audio),D(),c.life-=1,c.life>0?(_.set_2_seconds(),F(`ROUND ${c.current_round+1}`)):(s.clearRect(0,0,a,o),c.stop_game=!0,S(),x(g.game_over.obj_audio),Y("GAME OVER!"),setTimeout((()=>{$(),K()}),3e3))),!c.test_mode&&E.ball2.t.y>=o&&(E.ball2.is_active=!1),!c.test_mode&&E.ball3.t.y>=o&&(E.ball3.is_active=!1),[E.ball,E.ball2,E.ball3].forEach((r=>{r.t.y<=25&&(r.dy=-r.dy),r.l.x<=25&&(r.dx=-r.dx),r.b.y>=e&&c.test_mode&&(r.dy=-r.dy),r.r.x>=t&&(r.dx=-r.dx)}))}(),[E.ball,E.ball2,E.ball3].forEach((t=>{t.b.x>=E.platform.l-10&&t.b.x<E.platform.r+10&&t.b.y>=E.platform.t&&t.b.y-10<E.platform.t&&(t.stick||0===t.dy?t.stick&&0!==t.dy&&(t.dx=0,t.dy=0):(x(g.sfx6.obj_audio),t.dy=-t.dy),0!==t.dy&&(t.dx+=E.platform.acceleration))})),y.forEach((t=>{(E[t].l>=E.platform.l&&E[t].l<=E.platform.r&&E[t].b<=E.platform.b&&E[t].b>=E.platform.t||E[t].r>=E.platform.l&&E[t].r<=E.platform.r&&E[t].b<=E.platform.b&&E[t].b>=E.platform.t)&&E[t].activate()})),[E.ball,E.ball2,E.ball3].forEach((t=>{c.bricks.forEach((function(e,r){return t.is_active&&t.b.x>=e.l&&t.b.x<=e.r&&t.b.y>=e.t&&t.b.y<e.b||t.is_active&&t.t.x>=e.l&&t.t.x<=e.r&&t.t.y<=e.b&&t.t.y>e.t?(x(g.sfx7.obj_audio),t.dy=-t.dy,void M(r)):t.is_active&&t.r.y>=e.t&&t.r.y<=e.b&&t.r.x>=e.l&&t.r.x<e.r?(x(g.sfx7.obj_audio),t.dx=-t.dx,void M(r)):t.is_active&&t.l.y>=e.t&&t.l.y<=e.b&&t.l.x<=e.r&&t.l.x>e.l?(t.dx=-t.dx,x(g.sfx7.obj_audio),void M(r)):void 0}))})),y.forEach((t=>{E[t].bonus_start&&s.drawImage(E[t].img,80*p.bonus_frame,0,80,40,E[t].x,E[t].y,E[t].width/1.5,E[t].height/1.5)})),c.stop_game?c.stop_game=!1:F(t)})),O=E.platform.x}function q(){document.addEventListener("keydown",A),document.addEventListener("keyup",C),document.addEventListener("keypress",H),r.addEventListener("click",R),r.addEventListener("mousemove",B),document.addEventListener("contextmenu",T),r.addEventListener("dblclick",T),r.addEventListener("touchstart",N),r.addEventListener("touchmove",X),c.bricks=j(c.current_round),function(){e.drawImage(E.background.img,0,l),e.lineWidth=15,e.strokeStyle="black",e.strokeRect(0,l,a,o),e.shadowColor="#000a1e",e.shadowBlur=5,e.shadowOffsetX=5,e.shadowOffsetY=5,e.drawImage(E.border_pipe_horizontal.img,4,64,a-8,18),e.drawImage(E.border_pipe_vert.img,4,64,18,o-12),e.drawImage(E.border_pipe_vert.img,a-22,64,18,o-12),e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.drawImage(E.border_cornerTL.img,4,64),e.drawImage(E.border_cornerTR.img,a-40,64),e.shadowColor="#000a1e",e.shadowBlur=5,e.shadowOffsetX=5,e.shadowOffsetY=5;let t=2,r=(a-E.border_block_horizontal.img.width*t)/(t*t);for(let s=1;s<=t;s++)e.drawImage(E.border_block_horizontal.img,r*(s+s-1)+E.border_block_horizontal.img.width*(s-1),l,E.border_block_horizontal.img.width,E.border_block_horizontal.img.height);t=Math.floor(o/(1.5*E.border_block_vert.img.height)),r=(o-E.border_block_vert.img.height*(t-1))/t;for(let s=1;s<t;s++)e.drawImage(E.border_block_vert.img,0,l+r*s+E.border_block_vert.img.height*(s-1)),e.drawImage(E.border_block_vert.img,a-26,l+r*s+E.border_block_vert.img.height*(s-1))}(),p.setBonusRotation(),x(g.round_start.obj_audio),_.set_2_seconds(),F(`ROUND ${c.current_round+1}`)}function G(){return w(document.querySelector(".start-template")),f(document.body,'\n<div class="container arcade-font">\n    \n    <div class="d-flex j justify-content-around text-danger mb-0 mt-2">\n\n    <div>\n    <p class="h5 text-danger text-center"> 1 up </p>\n    <p class="h5 text-center text-white round-score">0000</p>\n    </div>\n\n    <div>\n    <h2 class="h5 text-danger text-center">HIGH SCORES </h2>\n    <h2 class="h5 text-center text-white game-score"> 50000 </h2>\n    </div>\n\n    <div>\n    <p class="h5 "></p>\n    <p class="h5"></p>\n    </div>\n   \n    </div>\n \n</div>\n    \n'),c.element_round_score=(".round-score",document.querySelector(".round-score")),t.style.left=r.style.left=(i-a)/2+"px",document.body.appendChild(t),document.body.appendChild(r),c.life=3,E.ball.reset(),function(t){return e=this,r=void 0,i=function*(){for(const e in t)t[e].img.src=t[e].url,yield t[e].img.decode();return"images load!"},new((s=void 0)||(s=Promise))((function(t,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function o(t){try{l(i.throw(t))}catch(t){n(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(a,o)}l((i=i.apply(e,r||[])).next())}));var e,r,s,i}(E).then(q),"game loaded"}function K(){v()}function $(){document.body.addEventListener("keypress",W),document.body.addEventListener("click",W)}function W(t){const e=t.target;(e.classList.contains("space")||"Space"===t.code)&&(document.body.removeEventListener("keypress",W),document.body.removeEventListener("click",W),g.intro.obj_audio.pause(),g.intro.obj_audio.currentTime=0,G()),(e.classList.contains("help")||"KeyH"===t.code)&&(w(document.querySelector(".start-template")),f(document.body,'\n<div class="container start-template">\n\n        <div class="d-flex flex-column mt-5 justify-content-center">\n\n\n            <div class="d-flex mt-5 justify-content-center">\n                <img class="w-50" class="brd" src="./assets/img/arkanoid.svg" alt="arkanoid">\n            </div>\n\n            <div class="my-2">\n                <div class="text-white  arcade-font h5 "> Keyboard </div>\n\n                <div><span class="h5">"Space"</span> - start the ball, &#160;&#160; <span class="h5">"Arrow left, Arrow\n                        right"</span> - move the platform,\n                    &#160;&#160; <span class="h5">"C"</span> - skip the level</div>\n            </div>\n            <hr>\n\n     \n            <div class="my-2">\n                <div class="text-white  arcade-font h5 "> Mouse </div>\n                <div><span class="h5">"Right click"</span> - start the ball, &#160;&#160;\n                    <span class="h5">"Left click on platform"</span> - binding - unbinding the mouse and the platform\n                </div>\n            </div>\n            <hr>\n\n            <div class="my-2">\n                <div class="text-white  arcade-font h5"> Touch screen </div>\n                <div><span class="h5">"Double Tap"</span> - start the ball, &#160;&#160;\n                    <span class="h5">"Swipe Right-Left" </span> - move the platform\n                </div>\n            </div>\n            <hr>\n\n\n            <div class="my-2">\n            <div class="text-warning  arcade-font h5"> Test Mode </div>\n            <div><span class="h5">"T"</span> - set bottom frame pipe for reflection</div>\n        </div>\n        <hr>\n\n        <div class="my-2">\n        <div class="text-white  arcade-font h5"> Bonus </div>\n        <div><span class="h5">The reflection of the ball when the platform is moving adds acceleration</span></div>\n        <div><span class="h5">"Bonus S"</span> - slowing down the ball</div>\n        <div><span class="h5">"Bonus C"</span> - sticking the ball to the platform</div>\n        <div><span class="h5">"Bonus D"</span> - adds 2 extra balls</div>\n        <div><span class="h5">"Bonus E"</span> - platform lengthening by 1.5 times</div>\n    </div>\n    <hr>\n            <div class="d-flex mt-3 justify-content-center">\n                <button class="space text-white bg-black arcade-font h4 border-0" type="button">push<br>space to play</button>\n            </div>\n\n        </div>\n\n    </div>\n'))}$(),K()})();